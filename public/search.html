<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>메뉴 검색</title>
</head>

<body>
    <h1>메뉴 검색</h1>
    <input type="text" id="searchInput" placeholder="검색어를 입력하세요">
    <button id="searchButton">검색</button>
    <div id="searchResults"></div>

    <script>
        const SEARCH_API_URL = 'http://localhost:3001/api/menu/search';

        document.getElementById('searchButton').onclick = async () => {
            const keyword = document.getElementById('searchInput').value;

            try {
                const response = await fetch(`${SEARCH_API_URL}?keyword=${encodeURIComponent(keyword)}`, {
                    headers: { Authorization: `Bearer ${localStorage.getItem('accessToken')}` },
                });

                if (!response.ok) throw new Error('검색 실패');

                const results = await response.json();
                const container = document.getElementById('searchResults');
                container.innerHTML = results.map(item => `
                    <div>
                        <h2>${item.name}</h2>
                        <p>${item.description}</p>
                        <p>${item.price}원</p>
                    </div>
                `).join('');
            } catch (error) {
                console.error(error);
                alert('검색 중 문제가 발생했습니다.');
            }
        };
    </script>
</body>

</html>